// minimal function\nexport async function handler(e){const id=e.queryStringParameters?.id; if(!id)return{statusCode:400,body:'{"error":"Missing id"}'}; const BASE_ID='appDSjIPinS4TgaHF'; const TABLE='Registros Safety'; const FIELD_ID='ID del reporte'; const url=`https://api.airtable.com/v0/${BASE_ID}/${encodeURIComponent(TABLE)}?filterByFormula=${encodeURIComponent(`{${FIELD_ID}}='${id}'`)}`; const token=process.env.AIRTABLE_PAT; if(!token)return{statusCode:500,body:'{"error":"Server missing AIRTABLE_PAT"}'}; try{const r=await fetch(url,{headers:{Authorization:`Bearer ${token}`}}); if(!r.ok)return{statusCode:r.status,body:await r.text()}; const d=await r.json(); if(!d.records||!d.records.length)return{statusCode:404,body:'{"error":"Not found"}'}; return{statusCode:200,body:JSON.stringify({fields:d.records[0].fields})};}catch(err){return{statusCode:500,body:JSON.stringify({error:err.message})}} }